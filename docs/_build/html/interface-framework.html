

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Vuba’s interface framework &mdash; vuba 0.1.2 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Creating basic interfaces" href="basic-interfaces.html" />
    <link rel="prev" title="Installation" href="installing.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> vuba
          

          
          </a>

          
            
            
              <div class="version">
                0.1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="why-vuba.html">Why vuba?</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Vuba’s interface framework</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#core-ui-components">Core UI components</a></li>
<li class="toctree-l2"><a class="reference internal" href="#retrieving-trackbar-information">Retrieving trackbar information</a></li>
<li class="toctree-l2"><a class="reference internal" href="#key-attributes">Key attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extensions-for-different-footage-types">Extensions for different footage types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="basic-interfaces.html">Creating basic interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="reading-images.html">Reading images</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing-images.html">Writing images</a></li>
<li class="toctree-l1"><a class="reference internal" href="mask.html">Creating masks</a></li>
<li class="toctree-l1"><a class="reference internal" href="contour-operations.html">Contour filters</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api-gui.html">HighGUI constructors</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-io.html">Image IO</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-ops.html">Image operations</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">vuba</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Vuba’s interface framework</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/interface-framework.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="vuba-s-interface-framework">
<span id="interface-framework"></span><h1>Vuba’s interface framework<a class="headerlink" href="#vuba-s-interface-framework" title="Permalink to this headline">¶</a></h1>
<p>All of the HighGUI constructors that vuba provides are developed such that any application is centred around its image processing component, with UI components such as trackbars being secondary. As such, any changes made to a UI component will propagate back to the image processing component and the results will be visualised in the interactive window. Below we will cover this framework in-depth, and in subsequent guides walk you through how you may go about constructing some interfaces.</p>
<div class="section" id="core-ui-components">
<h2>Core UI components<a class="headerlink" href="#core-ui-components" title="Permalink to this headline">¶</a></h2>
<p>The current gui constructors are built around the base class <a class="reference internal" href="generated/vuba.BaseGUI.html#vuba.BaseGUI" title="vuba.BaseGUI"><code class="xref py py-class docutils literal notranslate"><span class="pre">vuba.BaseGUI</span></code></a>. This class allows one to construct user interfaces through two decorators: <a class="reference internal" href="generated/vuba.BaseGUI.method.html#vuba.BaseGUI.method" title="vuba.BaseGUI.method"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.method</span></code></a> and <a class="reference internal" href="generated/vuba.BaseGUI.trackbar.html#vuba.BaseGUI.trackbar" title="vuba.BaseGUI.trackbar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.trackbar</span></code></a>. <a class="reference internal" href="generated/vuba.BaseGUI.method.html#vuba.BaseGUI.method" title="vuba.BaseGUI.method"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.method</span></code></a> wraps the image processing components of user interfaces and <a class="reference internal" href="generated/vuba.BaseGUI.trackbar.html#vuba.BaseGUI.trackbar" title="vuba.BaseGUI.trackbar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.trackbar</span></code></a> enables the creation of trackbars. The recommended layout (disregarding additional steps/logic) for trackbar callbacks is as follows: trackbars should always set the current trackbar value for a gui instance (using <a class="reference internal" href="generated/vuba.BaseGUI.__setitem__.html#vuba.BaseGUI.__setitem__" title="vuba.BaseGUI.__setitem__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.__setitem__</span></code></a>, call the declared image processing function (using <code class="xref py py-attr docutils literal notranslate"><span class="pre">BaseGUI.process</span></code> and then visualise the results in the interactive window (using <code class="docutils literal notranslate"><span class="pre">cv2.imshow(gui.title,</span> <span class="pre">image)</span></code> for e.g.). The simplest trackbar callback would carry out the aforementioned pipeline like follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@gui</span><span class="o">.</span><span class="n">trackbar</span><span class="p">(</span><span class="s2">&quot;Threshold&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;thresh_val&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">on_thresh</span><span class="p">(</span><span class="n">gui</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
    <span class="n">gui</span><span class="p">[</span><span class="s2">&quot;thresh_val&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span> <span class="c1"># pull the current trackbar value</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">process</span><span class="p">()</span> <span class="c1"># call the declared image processing function</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">gui</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span> <span class="c1"># visualise the result in the interactive window</span>
</pre></div>
</div>
<p>This callback structure ensures that the image processing function is always called on each trackbar change and the results are returned to the interactive window, unless omitted by logic you supply. Note that this type of callback is supplied with <a class="reference internal" href="generated/vuba.BaseGUI.html#vuba.BaseGUI" title="vuba.BaseGUI"><code class="xref py py-class docutils literal notranslate"><span class="pre">vuba.BaseGUI</span></code></a> so that you don’t have to code up the same callback for every trackbar. To use this built-in method simply call <a class="reference internal" href="generated/vuba.BaseGUI.trackbar.html#vuba.BaseGUI.trackbar" title="vuba.BaseGUI.trackbar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.trackbar</span></code></a> with <code class="docutils literal notranslate"><span class="pre">None</span></code> like follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gui</span><span class="o">.</span><span class="n">trackbar</span><span class="p">(</span><span class="s2">&quot;Threshold&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;thresh_val&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">255</span><span class="p">)(</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Similarly, the recommended layout for image processing callbacks using <a class="reference internal" href="generated/vuba.BaseGUI.method.html#vuba.BaseGUI.method" title="vuba.BaseGUI.method"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.method</span></code></a> employs much of the same principles:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@gui</span><span class="o">.</span><span class="n">method</span>
<span class="k">def</span> <span class="nf">threshold</span><span class="p">(</span><span class="n">gui</span><span class="p">):</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># create a copy of the current frame</span>
    <span class="n">thresh_val</span> <span class="o">=</span> <span class="n">gui</span><span class="p">[</span><span class="s2">&quot;thresh_val&quot;</span><span class="p">]</span>  <span class="c1"># grab the current threshold value</span>

    <span class="n">gray</span> <span class="o">=</span> <span class="n">vuba</span><span class="o">.</span><span class="n">gray</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span> <span class="c1"># grayscale the current frame</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">thresh</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">threshold</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="n">thresh_val</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">THRESH_BINARY</span><span class="p">)</span> <span class="c1"># threshold the current frame</span>

    <span class="c1"># Return the output</span>
    <span class="k">return</span> <span class="n">thresh</span>
</pre></div>
</div>
<p>Here, we first pull the current frame stored in the interface instance (from <code class="xref py py-attr docutils literal notranslate"><span class="pre">FrameGUI.frame</span></code>) and the current trackbar(s) value (using <a class="reference internal" href="generated/vuba.BaseGUI.__getitem__.html#vuba.BaseGUI.__getitem__" title="vuba.BaseGUI.__getitem__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.__getitem__</span></code></a>). We then pass these inputs to our image processing code (which is a simply binary threshold here) and then return the output to be visualised in the interactive window through our trackbar callbacks. In this sense, trackbar callbacks are the intermediate layer that communicate with the image processing and visualise the results in the interactive window:</p>
<img alt="_images/ui_framework.png" src="_images/ui_framework.png" />
</div>
<div class="section" id="retrieving-trackbar-information">
<h2>Retrieving trackbar information<a class="headerlink" href="#retrieving-trackbar-information" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="generated/vuba.BaseGUI.html#vuba.BaseGUI" title="vuba.BaseGUI"><code class="xref py py-class docutils literal notranslate"><span class="pre">vuba.BaseGUI</span></code></a> employs a dictionary interface for retrieving and assigning values associated with trackbars, primarily via <a class="reference internal" href="generated/vuba.BaseGUI.__getitem__.html#vuba.BaseGUI.__getitem__" title="vuba.BaseGUI.__getitem__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.__getitem__</span></code></a> and <a class="reference internal" href="generated/vuba.BaseGUI.__setitem__.html#vuba.BaseGUI.__setitem__" title="vuba.BaseGUI.__setitem__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.__setitem__</span></code></a> respectively. Here, the keys are the user-provided identification strings supplied to the <code class="docutils literal notranslate"><span class="pre">id</span></code> argument in <a class="reference internal" href="generated/vuba.BaseGUI.trackbar.html#vuba.BaseGUI.trackbar" title="vuba.BaseGUI.trackbar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.trackbar</span></code></a>. In addition to these two methods is <a class="reference internal" href="generated/vuba.BaseGUI.values.html#vuba.BaseGUI.values" title="vuba.BaseGUI.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.values</span></code></a>. This methods retrieves all current trackbar values and is useful in applications which have multiple trackbars where repeated calls to <a class="reference internal" href="generated/vuba.BaseGUI.__getitem__.html#vuba.BaseGUI.__getitem__" title="vuba.BaseGUI.__getitem__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.__getitem__</span></code></a> in <a class="reference internal" href="generated/vuba.BaseGUI.method.html#vuba.BaseGUI.method" title="vuba.BaseGUI.method"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.method</span></code></a> would be too verbose.</p>
</div>
<div class="section" id="key-attributes">
<h2>Key attributes<a class="headerlink" href="#key-attributes" title="Permalink to this headline">¶</a></h2>
<p>There are two main attribute types in the HighGUI constructors, those that contain information associated with UI components and those associated with the image processing component of the application. For the first type, there are the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">title</span></code>: character string corresponding to the title of the user interface created (specified at initiation).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trackbars</span></code>: dictionary containing trackbar metadata. As mentioned above, keys correspond to the user-provided identifications strings given to <a class="reference internal" href="generated/vuba.BaseGUI.trackbar.html#vuba.BaseGUI.trackbar" title="vuba.BaseGUI.trackbar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.trackbar</span></code></a>. Each trackbars metadata is stored in a dataclass: <a class="reference internal" href="generated/vuba.TrackbarMethod.html#vuba.TrackbarMethod" title="vuba.TrackbarMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">vuba.TrackbarMethod</span></code></a>.</p></li>
</ul>
<p>and for the second type, there are the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">process</span></code>: the image processing function supplied to <a class="reference internal" href="generated/vuba.BaseGUI.method.html#vuba.BaseGUI.method" title="vuba.BaseGUI.method"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseGUI.method</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frame</span></code>: the current frame, which will not be changed for single frame interfaces (e.g. <a class="reference internal" href="generated/vuba.FrameGUI.html#vuba.FrameGUI" title="vuba.FrameGUI"><code class="xref py py-class docutils literal notranslate"><span class="pre">vuba.FrameGUI</span></code></a>) and will for multi-frame interfaces (e.g. <a class="reference internal" href="generated/vuba.FramesGUI.html#vuba.FramesGUI" title="vuba.FramesGUI"><code class="xref py py-class docutils literal notranslate"><span class="pre">vuba.FramesGUI</span></code></a>, <a class="reference internal" href="generated/vuba.VideoGUI.html#vuba.VideoGUI" title="vuba.VideoGUI"><code class="xref py py-class docutils literal notranslate"><span class="pre">vuba.VideoGUI</span></code></a> and <a class="reference internal" href="generated/vuba.StreamGUI.html#vuba.StreamGUI" title="vuba.StreamGUI"><code class="xref py py-class docutils literal notranslate"><span class="pre">vuba.StreamGUI</span></code></a>).</p></li>
</ul>
</div>
<div class="section" id="extensions-for-different-footage-types">
<h2>Extensions for different footage types<a class="headerlink" href="#extensions-for-different-footage-types" title="Permalink to this headline">¶</a></h2>
<p>Due to the diversity of footage a given set of image analyses can be applied to, we have written extensions of <a class="reference internal" href="generated/vuba.BaseGUI.html#vuba.BaseGUI" title="vuba.BaseGUI"><code class="xref py py-class docutils literal notranslate"><span class="pre">vuba.BaseGUI</span></code></a> to work with single frames (py:class:<cite>vuba.FrameGUI</cite>), multiple in-memory frames (<a class="reference internal" href="generated/vuba.FramesGUI.html#vuba.FramesGUI" title="vuba.FramesGUI"><code class="xref py py-class docutils literal notranslate"><span class="pre">vuba.FramesGUI</span></code></a>), movies (<a class="reference internal" href="generated/vuba.VideoGUI.html#vuba.VideoGUI" title="vuba.VideoGUI"><code class="xref py py-class docutils literal notranslate"><span class="pre">vuba.VideoGUI</span></code></a>) and more recently, video feeds (<a class="reference internal" href="generated/vuba.StreamGUI.html#vuba.StreamGUI" title="vuba.StreamGUI"><code class="xref py py-class docutils literal notranslate"><span class="pre">vuba.StreamGUI</span></code></a>). Because all these constructors inherit <a class="reference internal" href="generated/vuba.BaseGUI.html#vuba.BaseGUI" title="vuba.BaseGUI"><code class="xref py py-class docutils literal notranslate"><span class="pre">vuba.BaseGUI</span></code></a>, they all share the same API and thus applying your image analyses to different footage formats often only consists of changing a couple lines of code (see <a class="reference internal" href="basic-interfaces.html#basic-interfaces"><span class="std std-ref">Creating basic interfaces</span></a>).</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="basic-interfaces.html" class="btn btn-neutral float-right" title="Creating basic interfaces" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installing.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020-2021, Vuba

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>